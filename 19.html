<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8">
<title>×™×•×¦×¨ VCARD 2.1 â€” ×¢×‘×¨×™×ª / Quoted-Printable</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@400;600&display=swap');

  body {
    font-family: "Heebo", "Segoe UI", Tahoma, Arial;
    background: radial-gradient(circle at top, #0d0d12, #050508 90%);
    color: #e8e8f8;
    padding: 25px;
    direction: rtl;
    text-shadow: 0 0 4px #000;
  }

  .card {
    max-width: 950px;
    margin: 20px auto;
    background: rgba(20, 20, 30, 0.92);
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 0 25px rgba(93, 0, 255, 0.4),
                inset 0 0 20px rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(100, 100, 255, 0.25);
    backdrop-filter: blur(6px);
  }

  h1 {
    margin: 0 0 14px 0;
    text-align: center;
    color: #77aaff;
    font-size: 1.8em;
    text-shadow: 0 0 10px #0088ff, 0 0 20px #4411aa;
  }

  textarea {
    width: 100%;
    min-height: 180px;
    border-radius: 10px;
    border: 1px solid rgba(100, 100, 255, 0.3);
    background: rgba(0, 0, 25, 0.65);
    color: #e0e8ff;
    padding: 12px;
    font-size: 15px;
    box-sizing: border-box;
    outline: none;
    transition: all 0.3s ease;
  }
  textarea:focus {
    box-shadow: 0 0 12px #3366ff;
    border-color: #6699ff;
  }

  .row {
    display: flex;
    gap: 10px;
    margin-top: 12px;
    flex-wrap: wrap;
    justify-content: center;
  }

  select, input[type=text], button {
    padding: 10px 14px;
    border-radius: 8px;
    border: 1px solid rgba(120, 120, 255, 0.4);
    font-size: 14px;
    background: rgba(15, 15, 40, 0.9);
    color: #d0d5ff;
    transition: all 0.25s ease;
  }
  select:focus, input:focus {
    border-color: #7aa2ff;
    box-shadow: 0 0 8px #3355ff;
  }

  button {
    background: linear-gradient(135deg, #3a57ff, #8b00ff);
    color: white;
    border: none;
    cursor: pointer;
    font-weight: 600;
    text-shadow: 0 0 6px #000;
    box-shadow: 0 0 10px rgba(138, 43, 226, 0.7);
  }
  button:hover {
    transform: scale(1.04);
    box-shadow: 0 0 20px #7aa2ff;
  }
  button.alt {
    background: linear-gradient(135deg, #666, #333);
    box-shadow: 0 0 8px #222;
  }
  button.alt:hover {
    box-shadow: 0 0 12px #999;
  }

  #output, #errors {
    white-space: pre-wrap;
    background: rgba(10, 10, 25, 0.85);
    padding: 14px;
    border: 1px solid rgba(80, 80, 255, 0.3);
    border-radius: 10px;
    margin-top: 14px;
    font-family: "Courier New", monospace;
    color: #a6baff;
    box-shadow: inset 0 0 15px rgba(0, 0, 100, 0.5);
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }
  th, td {
    border: 1px solid rgba(80, 80, 255, 0.3);
    padding: 7px;
    text-align: center;
    font-size: 13px;
    color: #c8d4ff;
  }
  th {
    background: rgba(60, 60, 120, 0.6);
    color: #fff;
    font-weight: 600;
  }

  footer {
    font-size: 12px;
    color: #99aaff;
    margin-top: 16px;
    text-align: center;
    opacity: 0.8;
    text-shadow: 0 0 6px #004;
  }

  ::selection {
    background: #0055ff;
    color: #fff;
  }
</style>

</head>
<body>
<div class="card">
  <h1>×™×•×¦×¨ ×›×¨×˜×™×¡×™ VCARD 2.1 (×¢×‘×¨×™×ª, Quoted-Printable)</h1>
  <p>×”×“×‘×§/×™ ×›××Ÿ ××ª ×”×˜×§×¡×˜ â€” ×©×•×¨×” ××—×ª = ×©×. ×œ××—×¨×™×” ×©×•×¨×” ××• ×™×•×ª×¨ ×©×œ ××¡×¤×¨×™× (××¤×©×¨ ×’× ×›××” ×‘××•×ª×” ×©×•×¨×”, ××•×¤×¨×“×™× ×‘×¨×•×•×—). ×‘×™×Ÿ ×× ×©×™ ×§×©×¨ â€” ×©×•×¨×” ×¨×™×§×”.</p>
  <textarea id="input" placeholder="×œ×“×•×’×× ××©×” ×›×”×Ÿ 055555555"></textarea>
  <div class="row" style="margin-top:8px">
    <select id="category">
      <option>×œ×œ× ×§×˜×’×•×¨×™×”</option><option>××©×¤×—×”</option><option>×—×‘×¨×™×</option><option>×œ×§×•×—×•×ª</option><option>×¢×¡×§×™×</option>
    </select>
    <input id="newCategory" type="text" placeholder="×”×•×¡×£ ×§×˜×’×•×¨×™×” ×—×“×©×”">
    <button onclick="addCategory()">â• ×”×•×¡×£ ×§×˜×’×•×¨×™×”</button>
  </div>
  <div class="row">
    <button onclick="generateVcards()">âš™ï¸ ×¦×•×¨ VCARD</button>
    <button onclick="downloadVcard()">â¬‡ï¸ ×”×•×¨×“ ×›-VCF</button>
    <button onclick="copyOutput()">ğŸ“‹ ×”×¢×ª×§ ×¤×œ×˜</button>
    <button class="alt" onclick="clearAll()">ğŸ§¹ × ×§×” ×”×›×œ</button>
  </div>
  <h3>×¤×œ×˜ VCARD (×¤×•×¨××˜ 2.1 â€” Quoted-Printable):</h3>
  <div id="output"></div>
  <h3>×”×ª×¨××•×ª / ×©×’×™××•×ª:</h3>
  <div id="errors"></div>
<footer style="text-align:center; font-size:0.9em; color:#999;">
  ×“×£ ×–×” × ×•×¦×¨ ×¢×œ ×™×“×™ <strong style="color:#fff;">progtek-yc</strong> |
  ×˜×œ×¤×•×Ÿ: <a href="tel:0796076724" style="color:#eee;">079-6076724</a> |
  ××™××™×™×œ: <a href="mailto:progtekyc@gmail.com" style="color:#eee;">progtekyc@gmail.com</a>
</footer>
</div>
<script>
function utf8QuotedPrintable(str){
  const encoder = new TextEncoder();
  const bytes = encoder.encode(str);
  let out = '';
  for(const b of bytes){
    if(b===32) out+=' ';
    else out+='='+b.toString(16).toUpperCase().padStart(2,'0');
  }
  return out;
}
function normalizePhone(tok){return tok.replace(/[^\d+*]/g,'');}
function countDigits(s){return (s.match(/\d/g)||[]).length;}
function generateVcards(){
  const raw=document.getElementById('input').value.trim();
  if(!raw){alert('××™×Ÿ ×˜×§×¡×˜ ×‘×§×œ×˜');return;}
  const blocks=raw.split(/\n\s*\n/);
  const cat=document.getElementById('category').value;
  const vcards=[];
  const errs=[];
  blocks.forEach((block,idx)=>{
    const lines=block.split(/\n+/).map(l=>l.trim()).filter(l=>l);
    if(!lines.length)return;
    const nameLine=lines[0];
    const nums=lines.slice(1).join(' ').split(/\s+/).map(normalizePhone).filter(n=>n);
    if(!nameLine && !nums.length){errs.push({i:idx+1,msg:'×¨×©×•××” ×¨×™×§×”'});return;}
    const encName=utf8QuotedPrintable(nameLine);
    const nLine=`N;CHARSET=UTF-8;ENCODING=QUOTED-PRINTABLE:;${encName};;;`;
    const fnLine=`FN;CHARSET=UTF-8;ENCODING=QUOTED-PRINTABLE:${encName}`;
    const phoneTypes=['CELL','HOME','WORK','FAX'];
    const phoneLines=nums.map((p,i)=>`TEL;${phoneTypes[i]||'OTHER'}:${p}`);
    const catLine=cat&&cat!=='×œ×œ× ×§×˜×’×•×¨×™×”'?`CATEGORIES;CHARSET=UTF-8;ENCODING=QUOTED-PRINTABLE:${utf8QuotedPrintable(cat)}`:'';
    const parts=['BEGIN:VCARD','VERSION:2.1',nLine,fnLine];
    if(catLine)parts.push(catLine);
    if(phoneLines.length)parts.push(phoneLines.join('\n'));
    parts.push('END:VCARD');
    vcards.push(parts.join('\n'));
  });
  document.getElementById('output').textContent=vcards.join('\n\n');
  if(errs.length){
    let t='<table><tr><th>#</th><th>×©×’×™××”</th></tr>';
    errs.forEach(e=>t+=`<tr><td>${e.i}</td><td>${e.msg}</td></tr>`);
    t+='</table>';
    document.getElementById('errors').innerHTML=t;
  }else document.getElementById('errors').innerHTML='';
}
function clearAll(){
  document.getElementById('input').value='';
  document.getElementById('output').textContent='';
  document.getElementById('errors').innerHTML='';
}
function copyOutput(){
  const txt=document.getElementById('output').textContent;
  if(!txt){alert('××™×Ÿ ×¤×œ×˜ ×œ×”×¢×ª×§×”');return;}
  navigator.clipboard.writeText(txt).then(()=>alert('×”×¤×œ×˜ ×”×•×¢×ª×§ ×œ×œ×•×—'));
}
function downloadVcard(){
  const txt=document.getElementById('output').textContent;
  if(!txt){alert('××™×Ÿ ×¤×œ×˜ ×œ×”×•×¨×“×”');return;}
  let fn=prompt('×©× ×§×•×‘×¥:','contacts.vcf')||'contacts.vcf';
  if(!fn.toLowerCase().endsWith('.vcf'))fn+='.vcf';
  const blob=new Blob([txt],{type:'text/vcard;charset=utf-8'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url;a.download=fn;a.click();
  URL.revokeObjectURL(url);
}
function addCategory(){
  const sel=document.getElementById('category');
  const val=document.getElementById('newCategory').value.trim();
  if(!val)return;
  const opt=document.createElement('option');opt.text=val;sel.add(opt);sel.value=val;
  document.getElementById('newCategory').value='';
}
</script>
</body>
</html>
